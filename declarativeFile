pipeline { 
    agent any  
    tools { 
        maven 'maven3' 
        jdk 'java' 
		sonarqube 'sonar'
    }
    
   
    stages { 
        stage('check') { 
            steps { 
               echo 'Initial check' 
            }
        }
        
      stage('code checkout') {
            steps {
            git 'https://github.com/joshiPriya/helloworld-java-maven.git'
            echo 'checkout done'
            }
          }  
		  
		  stage ('Compile Stage') {

            steps {
                
                    sh 'mvn compile'
                }
            }
			
			stage ('Testing Stage') {

            steps {
                
                    sh 'mvn test'
                }
            
        }
		
		stage ('build Stage') {

            steps {
                
                    sh 'mvn test'
                }
            
        }
		
		stage('sonarqube analysis') {
            steps {
                 
                 
                       sh 'mvn sonar:sonar'
                       
                     
            }
        }
        
          
          
        stage ('deploy Stage artifact to nexus') {

            steps {
                
                    sh 'mvn deploy'
                }
            
        }
        
         stage('post check') { 
            steps { 
               echo 'Al done' 
            }
        }
          
 
          }
    }
